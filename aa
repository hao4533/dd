hostname zebra
password zebra
enable password zebra
log file /var/log/zebra/zebra.log

zebra=yes
ospfd=yes
ripd=no
bgpd=no

hostname ospfd
password zebra
enable password zebra

router ospf
network 155.56.158.192/27 area 0.0.0.0
network 155.57.121.128/27 area 0.0.0.0
network 155.57.192.0/27 area 0.0.0.0
network 192.168.192.0/24 area 0.0.0.0
redistribute connected
log file /var/log/zebra/ospfd.log

A[1]=rcusc
B[1]=rcusc
B[2]=rctu
C[1]=rctu
C[2]=rcit

S[0]=rcit
S[1]=webserver
S[2]=sw1

D[1]=rctu
E[1]=rsarg
E[2]=rsofl
F[0]=rsarg
F[1]=rsofl

PC[0]=rsofl
PC[1]=pc1
PC[2]=pc2
PC[3]=sw2

rcusc[2]=rctu[2]
rctu[3]=rsofl[3]
rsofl[1]=rsarg[1]


# rcusc
ifconfig eth1 132.134.192.1/27 up    # LAN A
ifconfig eth2 132.133.18.1/27 up     # LAN B
ifconfig eth3 10.0.1.1/30 up         # Kết nối tới rctu
/etc/init.d/quagga start
route add -net 132.132.18.0/27 gw 10.0.1.2
route add -net 155.56.158.192/27 gw 10.0.1.2
route add -net 155.57.121.128/27 gw 10.0.1.2
route add -net 155.57.192.0/27 gw 10.0.1.2
route add -net 192.168.192.0/24 gw 10.0.1.2
route add -net 192.200.200.0/24 gw 10.0.1.2

# rctu
ifconfig eth1 132.132.18.1/27 up     # LAN C
ifconfig eth2 155.56.158.193/27 up   # LAN D
ifconfig eth3 10.0.1.2/30 up         # Kết nối tới rcusc
ifconfig eth4 10.0.2.1/30 up         # Kết nối tới rsofl
/etc/init.d/quagga start
route add -net 132.134.192.0/27 gw 10.0.1.1
route add -net 132.133.18.0/27 gw 10.0.1.1
route add -net 155.57.121.128/27 gw 10.0.2.2
route add -net 155.57.192.0/27 gw 10.0.2.2
route add -net 192.168.192.0/24 gw 132.132.18.2
route add -net 192.200.200.0/24 gw 10.0.2.2

# rcit
ifconfig eth1 132.132.18.2/27 up     # LAN C
ifconfig eth2 192.168.192.1/24 up    # LAN Server
/etc/init.d/quagga start
route add default gw 132.132.18.1
route add -net 132.134.192.0/27 gw 132.132.18.1
route add -net 132.133.18.0/27 gw 132.132.18.1
route add -net 155.56.158.192/27 gw 132.132.18.1
route add -net 155.57.121.128/27 gw 132.132.18.1
route add -net 155.57.192.0/27 gw 132.132.18.1
route add -net 192.200.200.0/24 gw 132.132.18.1

# rsarg
ifconfig eth1 155.57.121.129/27 up   # LAN E
ifconfig eth2 155.57.192.1/27 up     # LAN F
ifconfig eth3 10.0.3.1/30 up         # Kết nối tới rsofl
/etc/init.d/quagga start
route add -net 192.200.200.0/24 gw 10.0.3.2
route add -net 132.134.192.0/27 gw 10.0.3.2
route add -net 132.133.18.0/27 gw 10.0.3.2
route add -net 132.132.18.0/27 gw 10.0.3.2
route add -net 155.56.158.192/27 gw 10.0.3.2
route add -net 192.168.192.0/24 gw 10.0.3.2

# rsofl
ifconfig eth1 10.0.3.2/30 up         # Kết nối tới rsarg
ifconfig eth2 10.0.2.2/30 up         # Kết nối tới rctu
ifconfig eth3 192.200.200.1/24 up    # LAN PC
/etc/init.d/quagga start
route add -net 132.134.192.0/27 gw 10.0.2.1
route add -net 132.133.18.0/27 gw 10.0.2.1
route add -net 132.132.18.0/27 gw 10.0.2.1
route add -net 155.56.158.192/27 gw 10.0.2.1
route add -net 155.57.121.128/27 gw 10.0.3.1
route add -net 155.57.192.0/27 gw 10.0.3.1
route add -net 192.168.192.0/24 gw 10.0.2.1

# webserver
ifconfig eth0 192.168.192.100/24 up
route add default gw 192.168.192.1
/etc/init.d/apache2 start
# Tạo trang web mặc định
echo "<!DOCTYPE html>
<html>
<head>
    <title>Web Server</title>
</head>
<body>
    <h1>Welcome to Web Server</h1>
    <p>Server IP: 192.168.192.100</p>
</body>
</html>" > /var/www/html/index.html

# pc1
ifconfig eth0 192.200.200.101/24 up
route add default gw 192.200.200.1
echo "nameserver 8.8.8.8" > /etc/resolv.conf
echo "nameserver 1.1.1.1" >> /etc/resolv.conf

# pc2
ifconfig eth0 192.200.200.102/24 up
route add default gw 192.200.200.1
echo "nameserver 8.8.8.8" > /etc/resolv.conf
echo "nameserver 1.1.1.1" >> /etc/resolv.conf

#Switch1
ifconfig eth0 up
ifconfig eth1 up
ifconfig eth2 up
brctl addbr br0
brctl addif br0 eth0
brctl addif br0 eth1
brctl addif br0 eth2
brctl stp br0 on
ifconfig br0 up

#Switch2
ifconfig eth0 up
ifconfig eth1 up
ifconfig eth2 up
ifconfig eth3 up
brctl addbr br0
brctl addif br0 eth0
brctl addif br0 eth1
brctl addif br0 eth2
brctl addif br0 eth3
brctl stp br0 on
ifconfig br0 up



